# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–º WB `/api/v2/list/goods/filter`

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/v2/list/goods/filter` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–≤–∞—Ä–∞—Ö —Å —Ü–µ–Ω–∞–º–∏, —Å–∫–∏–¥–∫–∞–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://dev.wildberries.ru/openapi/work-with-products#tag/Ceny-i-skidki/paths/~1api~1v2~1list~1goods~1filter/get

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–π URL
```
https://discounts-prices-api.wildberries.ru
```

### –ú–µ—Ç–æ–¥—ã –∑–∞–ø—Ä–æ—Å–∞

#### 1. POST `/api/v2/list/goods/filter` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–∞—Ö –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- **–õ–∏–º–∏—Ç:** –¥–æ 100 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "nmIDs": [123456, 789012, ...]
}
```
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `nmIDs` (array of integers): –ú–∞—Å—Å–∏–≤ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–Ω—ã—Ö ID —Ç–æ–≤–∞—Ä–æ–≤ (nmID)

#### 2. GET `/api/v2/list/goods/filter` (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–± –æ–¥–Ω–æ–º —Ç–æ–≤–∞—Ä–µ
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã query:**
  - `vendorCode` (string): –ê—Ä—Ç–∏–∫—É–ª –ø—Ä–æ–¥–∞–≤—Ü–∞
  - `limit` (optional): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ (–º–∞–∫—Å 1000)
  - `offset` (optional): –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

### –õ–∏–º–∏—Ç—ã API

- **10 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 6 —Å–µ–∫—É–Ω–¥**
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏:** 600 –º—Å
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å `429 Too Many Requests`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

```json
{
  "data": {
    "listGoods": [
      {
        "nmID": 123456,
        "vendorCode": "ABC123",
        "price": 1000,
        "currencyIsoCode4217": "RUB",
        "discount": 10,
        "clubDiscount": 5,
        "editableSizePrice": true,
        "isBadTurnover": false
      }
    ]
  },
  "error": false,
  "errorText": ""
}
```

## üîë –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `.env`

### 1. API –∫–ª—é—á–∏ Wildberries

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –Ω—É–∂–µ–Ω API —Ç–æ–∫–µ–Ω —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π **"–¶–µ–Ω—ã –∏ —Å–∫–∏–¥–∫–∏"**:

```env
WB_API_KEY_MAU=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
WB_API_KEY_MAB=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
WB_API_KEY_MMA=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
WB_API_KEY_COSMO=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
WB_API_KEY_DREAMLAB=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
WB_API_KEY_BEAUTYLAB=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
```

### 2. –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API —Ç–æ–∫–µ–Ω

1. –í–æ–π–¥–∏—Ç–µ –≤ **–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞ Wildberries**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ API**
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω"**
4. –£–∫–∞–∂–∏—Ç–µ:
   - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
   - **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±–µ—Ä–∏—Ç–µ **"–¶–µ–Ω—ã –∏ —Å–∫–∏–¥–∫–∏"**
   - –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–∞—Ö
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω** –≤ `.env` —Ñ–∞–π–ª

**–í–∞–∂–Ω–æ:**
- –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç **180 –¥–Ω–µ–π**
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω –Ω–µ–ª—å–∑—è –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é **"–¶–µ–Ω—ã –∏ —Å–∫–∏–¥–∫–∏"**
- API –∫–ª—é—á –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization` –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ "Bearer"

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ —á–µ–≥–æ-—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:

1. **–ù–µ—Ç API –∫–ª—é—á–∞ –¥–ª—è –∫–∞–±–∏–Ω–µ—Ç–∞:**
   - –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ
   - –î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª

2. **–û—à–∏–±–∫–∞ 401 (–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω):**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç—ë–∫ (180 –¥–Ω–µ–π)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–¶–µ–Ω—ã –∏ —Å–∫–∏–¥–∫–∏"

3. **–û—à–∏–±–∫–∞ 403 (–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω):**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Ç–æ–∫–µ–Ω–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

4. **–û—à–∏–±–∫–∞ 429 (–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤):**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤
   - –£–≤–µ–ª–∏—á—å—Ç–µ `REQUEST_DELAY` –≤ `.env` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 0.6 —Å–µ–∫—É–Ω–¥—ã)

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –∫–æ–¥–µ

–ú–µ—Ç–æ–¥ `get_prices_by_articles()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è `vendorCode` ‚Üí `nmID`
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç POST –∑–∞–ø—Ä–æ—Å —Å `nmIDs` –¥–ª—è –±–∞—Ç—á–µ–π (–¥–æ 100 —Ç–æ–≤–∞—Ä–æ–≤)
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GET –∑–∞–ø—Ä–æ—Å —Å `vendorCode` –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ `nmID`
4. –°–æ–±–ª—é–¥–∞–µ—Ç –ª–∏–º–∏—Ç—ã API (10 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 6 —Å–µ–∫—É–Ω–¥)

### –ü—Ä–∏–º–µ—Ä

```python
from src.api.wb_api import WildberriesAPI

api = WildberriesAPI(api_key="–≤–∞—à_—Ç–æ–∫–µ–Ω")
articles = ["ART001", "ART002", "ART003"]
prices = api.get_prices_by_articles(articles)
```

## üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–∞:
- `{"data": {"listGoods": [...]}}`
- `{"data": [...]}`
- `[...]` (–ø—Ä—è–º–æ–π —Å–ø–∏—Å–æ–∫)

–ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:
- `nmID` - –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–Ω—ã–π ID
- `vendorCode` - –∞—Ä—Ç–∏–∫—É–ª –ø—Ä–æ–¥–∞–≤—Ü–∞
- `price` - —Ü–µ–Ω–∞
- `discount` - —Å–∫–∏–¥–∫–∞
- `clubDiscount` - —Å–∫–∏–¥–∫–∞ WB –ö–ª—É–±–∞
- –ò –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –∏–∑ –æ—Ç–≤–µ—Ç–∞ API

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ê—Ä—Ç–∏–∫—É–ª—ã –≤ —Ñ–∞–π–ª–µ Articles.xlsx** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `vendorCode` (–∞—Ä—Ç–∏–∫—É–ª—ã –ø—Ä–æ–¥–∞–≤—Ü–∞), –∞ –Ω–µ `nmID`
2. **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ vendorCode ‚Üí nmID** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞
3. **–ï—Å–ª–∏ —Ç–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–∞–±–∏–Ω–µ—Ç–µ**, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è GET –∑–∞–ø—Ä–æ—Å —Å `vendorCode`
4. **–õ–∏–º–∏—Ç—ã API —Å—Ç—Ä–æ–≥–∏–µ** - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –≤–æ–∑–º–æ–∂–Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞






